<html>
  <head>
    <title>webledger</title>
    <link rel="stylesheet" href="css/spux.css" />
    <script type="application/ld+json" src="./wallet.json" id="data"></script>
  </head>
  <body>
    <script type="module">
      import { html, render } from './js/spux.js'
      import Navbar from './components/Navbar.js'

      var webcredits

      fetch('./webcredits.json')
        .then(response => response.json())
        .then(obj => {
          webcredits = obj
          renderAll()
        })

      function renderAll () {
        render(
          html`
            <${Navbar} title="Web Ledger" />

            <table>
              <tr>
                <th>Source</th>
                <th>Amount</th>
                <th>Comment</th>
                <th>Destination</th>
              </tr>

              ${webcredits.map(el => {
                return html`
                  <tr>
                    <td>${el.source}</td>
                    <td>${el.amount}</td>
                    <td>${el.comment}</td>
                    <td>${el.destination}</td>
                  </tr>
                `
              })}
            </table>
          `,
          document.body
        )
      }
    </script>
  </body>
</html>
